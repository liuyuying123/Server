# 连接池的实现

连接池主要负责管理所有的TCP连接,并负责处理超时连接（时间轮）。单例模式创建一个进程中唯一的连接池
- map<int,shared_ptr<Conn>> mappings_  socket文件描述符->为它分配的连接的指针（使用智能指针）
- set<shared_ptr<Conn>> conns_  保存连接池中所有空闲的连接的指针
- map<int,Timer*> allTimers_  socket文件描述符->定时器
- TimeWheel* timeWheel_  连接池中保存的时间轮，用来处理超时连接

## 连接池功能
- 当新连接到达时，给连接socket分配一个Conn连接结构,添加定时器
- 当连接断开时，回收Conn，将它加入到空闲连接conns_当中，用于回收利用
- 连接超时，关闭连接socket文件描述符，删除定时器，回收Conn
- 连接池提供处理超时连接的接口tick函数，用于删除超时连接

## 存在的问题
- 在一个Conn类中封装了所有读数据、写数据、处理数据的方法，太过复杂了，应该将httprequest和httpresponse分开
- 感觉在很多地方Epoller和其他类太过于耦合，但是现在也没想出啥更好的解决办法
- 未支持登录验证身份信息，之后可以添加
- Server的日志系统未实现，之后添加
- 未给服务器进行压力测试，之后试试
- 解析http请求的时候使用正则表达式应该会更高效，之后试试